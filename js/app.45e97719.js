(function(){"use strict";var e={2096:function(e,t,n){n(606);var i=n(1643),a=(n(2418),n(6790)),s=(n(4399),n(629)),u=(n(2443),n(1876)),l=(n(7322),n(6631)),r=(n(6791),n(672)),o=(n(9495),n(9826)),c=(n(5825),n(176)),d=(n(2680),n(5410)),p=(n(110),n(7207)),m=(n(3316),n(126)),h=(n(7378),n(2201)),y=(n(1325),n(8202)),f=n(9242),w=n(3396),g=n(7139);const v=(0,w._)("span",{class:"circle"},null,-1),_=(0,w._)("span",{class:"circle"},null,-1),x=(0,w._)("span",{class:"circle"},null,-1),k=(0,w.Uk)(" 登录 "),W=(0,w.Uk)("搜索"),b={class:"nav-bar"},M={id:"main"},I={id:"audio_disc",ref:"audio_disc"},L=(0,w._)("span",null,null,-1),C={class:"custom-button-bar"},P=(0,w._)("span",{class:"circle"},null,-1),Z=["src"];function z(e,t,n,i,a,s){const u=(0,w.up)("van-col"),l=(0,w.up)("van-icon"),r=(0,w.up)("van-search"),o=(0,w.up)("router-link"),c=(0,w.up)("van-row"),d=(0,w.up)("van-divider"),p=(0,w.up)("router-view"),m=(0,w.up)("van-image"),h=(0,w.up)("van-slider");return(0,w.wg)(),(0,w.iD)("div",null,[(0,w._)("header",null,[(0,w.Wm)(c,{align:"center"},{default:(0,w.w5)((()=>[(0,w.Wm)(u,{id:"menu_circle",span:"4"},{default:(0,w.w5)((()=>[v,_,x])),_:1}),(0,w.Wm)(u,{span:"4"},{default:(0,w.w5)((()=>[(0,w.Wm)(l,{onClick:t[0]||(t[0]=t=>e.$router.back()),id:"left-icon",name:"arrow-left"}),(0,w.Wm)(l,{onClick:t[1]||(t[1]=t=>e.$router.go(1)),id:"right-icon",name:"arrow"})])),_:1}),(0,w.Wm)(u,{span:"8"},{default:(0,w.w5)((()=>[(0,w.Wm)(r,{modelValue:a.music,"onUpdate:modelValue":t[2]||(t[2]=e=>a.music=e),shape:"round",background:"transparent",placeholder:"请输入搜索关键词",onSearch:t[3]||(t[3]=e=>s.searchMusic(a.music))},null,8,["modelValue"])])),_:1}),(0,w.Wm)(u,{span:"4"}),(0,w.Wm)(u,{span:"4"},{default:(0,w.w5)((()=>[k,(0,w.Wm)(o,{to:{path:"/search",query:{keyword:"盗将行"}}},{default:(0,w.w5)((()=>[W])),_:1})])),_:1})])),_:1}),(0,w.Wm)(d)]),(0,w.Wm)(c,null,{default:(0,w.w5)((()=>[(0,w._)("div",b,[((0,w.wg)(!0),(0,w.iD)(w.HY,null,(0,w.Ko)(a.navItems,(e=>((0,w.wg)(),(0,w.j4)(o,{replace:"",to:{path:e.path},key:e},{default:(0,w.w5)((()=>[(0,w.Uk)((0,g.zw)(e.name),1)])),_:2},1032,["to"])))),128))]),(0,w._)("div",M,[(0,w.Wm)(p,null,{default:(0,w.w5)((({Component:e})=>[((0,w.wg)(),(0,w.j4)(w.Ob,null,[((0,w.wg)(),(0,w.j4)((0,w.LL)(e)))],1024))])),_:1})])])),_:1}),(0,w._)("footer",null,[(0,w._)("div",I,[(0,w.Wm)(m,{id:"audio_disc_img",round:"",src:e.musicPic},null,8,["src"]),L],512),(0,w.Wm)(c,null,{default:(0,w.w5)((()=>[(0,w.Wm)(u,{span:"24",style:{"padding-left":"14px"}},{default:(0,w.w5)((()=>[(0,w.Wm)(h,{modelValue:a.audio_slider,"onUpdate:modelValue":t[4]||(t[4]=e=>a.audio_slider=e),onChange:s.changeAudioProgress,"inactive-color":"lightgray","active-color":"blue","button-size":"5px","bar-height":"3px"},{button:(0,w.w5)((()=>[(0,w._)("div",null,[(0,w._)("div",C,(0,g.zw)(s.transTime(a.audio_slider)),1),P])])),_:1},8,["modelValue","onChange"]),(0,w.Wm)(c,{align:"center"},{default:(0,w.w5)((()=>[(0,w.Wm)(u,{span:"6",style:{"text-align":"start"}},{default:(0,w.w5)((()=>[(0,w.Uk)((0,g.zw)(e.musicName)+" "+(0,g.zw)(e.musicSinger),1)])),_:1}),(0,w.Wm)(u,{span:"12"},{default:(0,w.w5)((()=>[(0,w.Wm)(c,{align:"center"},{default:(0,w.w5)((()=>[(0,w.Wm)(u,{span:"2",style:{"text-align":"end","padding-right":"14px"}}),(0,w.Wm)(u,{span:"20"}),(0,w.Wm)(u,{span:"2",style:{"text-align":"start","padding-left":"14px"}})])),_:1}),(0,w.Wm)(c,{align:"center"},{default:(0,w.w5)((()=>[(0,w.Wm)(u,{span:"8"},{default:(0,w.w5)((()=>[(0,w.Wm)(l,{onClick:s.prevMusic,class:"iconfont icon-skip_previous",size:"50px"},null,8,["onClick"])])),_:1}),(0,w.Wm)(u,{span:"8"},{default:(0,w.w5)((()=>[(0,w.wy)((0,w.Wm)(l,{onClick:s.play,class:"iconfont","class-prefix":"icon",name:"play",size:"70px"},null,8,["onClick"]),[[f.F8,!a.isPlaying]]),(0,w.wy)((0,w.Wm)(l,{onClick:s.pause,class:"iconfont icon-pause",size:"70px"},null,8,["onClick"]),[[f.F8,a.isPlaying]])])),_:1}),(0,w.Wm)(u,{span:"8"},{default:(0,w.w5)((()=>[(0,w.Wm)(l,{onClick:s.nextMusic,class:"iconfont icon-skip_next",size:"50px"},null,8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,w.Wm)(u,{span:"6"},{default:(0,w.w5)((()=>[(0,w.Wm)(l,{class:"iconfont icon-playlist",size:"50px"})])),_:1})])),_:1})])),_:1})])),_:1}),(0,w._)("audio",{ref:"audio",style:{display:"none"},src:a.musicUrl,onTimeupdate:t[5]||(t[5]=(...e)=>s.audioTimeupdate&&s.audioTimeupdate(...e)),onCanplay:t[6]||(t[6]=(...e)=>s.getDuration&&s.getDuration(...e)),onPause:t[7]||(t[7]=e=>a.isPlaying=!1),onPlaying:t[8]||(t[8]=e=>a.isPlaying=!0),onEnded:t[9]||(t[9]=(...e)=>s.nextMusic&&s.nextMusic(...e)),onError:t[10]||(t[10]=(...e)=>s.nextMusic&&s.nextMusic(...e)),controls:"",autoplay:""},null,40,Z)])])}n(2763);var T=n(82),$=n(6265),U=n.n($);const j={data:{playList:[],playIndex:0,musicUrl:"",musicName:"歌名",musicSinger:"歌手",musicPic:"https://img.zcool.cn/community/012a4c5d724c27a801202f17b8dbd9.png@1280w_1l_2o_100sh.png"},methods:{playMusicByIndex(e){this.playIndex=e,U().get("https://autumnfish.cn/song/url?id="+this.playList[e].id).then((e=>{this.musicUrl=e.data.data[0].url})).catch((e=>{alert("搜索错误"+e)})),U().get("https://autumnfish.cn/song/detail?ids="+this.playList[e].id).then((e=>{this.musicPic=e.data.songs[0].al.picUrl,this.musicSinger=e.data.songs[0].ar[0].name,this.musicName=e.data.songs[0].name})).catch((e=>{alert("搜索错误 "+e)}))},playMusicByList(e,t){this.playList=e,this.playIndex=t,this.playMusicByIndex(t)}}};var D={name:"App",mixins:[j],data(){return{navItems:[{name:"首页",path:"/"},{name:"播放",path:"/player"}],loading:!1,finished:!1,music:"",musicUrl:"",isPlaying:!1,audio_duration:"0:00",audio_currentTime:"0:00",audio_slider:0}},methods:{changeAudioProgress(e){this.$refs.audio.currentTime=e/100*this.$refs.audio.duration},audioTimeupdate(e){this.audio_currentTime=this.transTime(e.target.currentTime),this.audio_slider=e.target.currentTime/this.$refs.audio.duration*100},getDuration(){this.audio_duration=this.transTime(this.$refs.audio.duration)},transTime(e){let t=parseInt(e),n=parseInt(t/60),i=t%60+"",a=":";return 0===n?n="00":n<10&&(n="0"+n),1===i.length&&(i="0"+i),n+a+i},play(){""===this.$refs.audio.currentSrc&&this.playMusicByIndex(this.playIndex),this.$refs.audio.play()},pause(){this.$refs.audio.pause()},nextMusic(){this.playIndex===this.playList.length-1?this.playIndex=0:this.playIndex++,this.playMusicByIndex(this.playIndex)},prevMusic(){0===this.playIndex?this.playIndex=this.playList.length-1:this.playIndex--,this.playMusicByIndex(this.playIndex)},searchMusic(e){""===e&&(e="盗将行"),this.$router.push({path:"/search",query:{keyword:e}})},toast(e){(0,T.Z)(e)}}},O=n(89);const B=(0,O.Z)(D,[["render",z]]);var H=B,N=n(678);const S=e=>((0,w.dD)("data-v-6f8aaa08"),e=e(),(0,w.Cn)(),e),q=S((()=>(0,w._)("h2",null,"热门推荐",-1))),E={class:"van-ellipsis"},K=S((()=>(0,w._)("h2",null,"热门音乐",-1))),V={class:"song-title"},Y={class:"song-label"};function A(e,t,n,i,a,s){const u=(0,w.up)("van-image"),l=(0,w.up)("van-col"),r=(0,w.up)("van-row"),o=(0,w.up)("van-cell");return(0,w.wg)(),(0,w.iD)("div",null,[q,(0,w.Wm)(r,null,{default:(0,w.w5)((()=>[((0,w.wg)(!0),(0,w.iD)(w.HY,null,(0,w.Ko)(a.recommendMusicList,(e=>((0,w.wg)(),(0,w.j4)(l,{span:"6",key:e.id},{default:(0,w.w5)((()=>[(0,w.Wm)(u,{width:"80%",height:"70%",radius:"18px",fit:"cover",src:e.picUrl},null,8,["src"]),(0,w._)("div",E,[(0,w._)("b",null,(0,g.zw)(e.name),1)])])),_:2},1024)))),128))])),_:1}),K,((0,w.wg)(!0),(0,w.iD)(w.HY,null,(0,w.Ko)(a.recommendNewMusicList,((e,t)=>((0,w.wg)(),(0,w.j4)(o,{onClick:e=>s.pauseM(t),key:e,center:""},{title:(0,w.w5)((()=>[(0,w._)("div",V,(0,g.zw)(e.name),1),(0,w._)("div",Y,(0,g.zw)(e.song.album.artists[0].name),1)])),icon:(0,w.w5)((()=>[(0,w.Wm)(u,{width:"60p",height:"60px",radius:"8px",fit:"cover",src:e.picUrl},null,8,["src"])])),_:2},1032,["onClick"])))),128))])}U().defaults.baseURL="https://autumnfish.cn/";var F=U();const R=e=>F({url:"/personalized",params:e}),G=e=>F({url:"/personalized/newsong",params:e}),J=e=>F({url:"/search",params:e}),Q=R,X=G,ee=J;var te={name:"HomePage",mixins:[j],data(){return{recommendMusicList:[],recommendNewMusicList:[]}},async created(){const e=await Q({limit:8});this.recommendMusicList=e.data.result;const t=await X({limit:5});this.recommendNewMusicList=t.data.result},methods:{pauseM(e){this.list=this.recommendNewMusicList,this.playMusicByIndex(e)}}};const ne=(0,O.Z)(te,[["render",A],["__scopeId","data-v-6f8aaa08"]]);var ie=ne;function ae(e,t,n,i,a,s){const u=(0,w.up)("MusicItem");return(0,w.wg)(),(0,w.iD)("div",null,[(0,w._)("h2",null,"'"+(0,g.zw)(a.keyword)+"' 最佳匹配",1),((0,w.wg)(!0),(0,w.iD)(w.HY,null,(0,w.Ko)(e.playList,((e,t)=>((0,w.wg)(),(0,w.j4)(u,{key:e.id,position:t,id:e.id,title:e.name,label:e.artists[0].name},null,8,["position","id","title","label"])))),128))])}function se(e,t,n,i,a,s){const u=(0,w.up)("van-cell");return(0,w.wg)(),(0,w.j4)(u,{onClick:t[0]||(t[0]=t=>e.playMusicByIndex(n.position)),title:n.title,label:n.label,"title-class":"music-title","label-class":"music-author",center:""},null,8,["title","label"])}var ue={name:"MusicItem",mixins:[j],props:{title:String,label:String,id:Number,position:Number},data(){},methods:{play(){this.$router.replace({path:"/player",query:{id:this.id}})}}};const le=(0,O.Z)(ue,[["render",se]]);var re=le,oe={name:"SearchPage",mixins:[j],components:{MusicItem:re},data(){return{keyword:this.$route.query.keyword}},computed:{getKey(){return this.$route.query.keyword}},created(){},watch:{getKey(){this.keyword=this.$route.query.keyword,this.searchList()}},mounted(){this.searchList()},methods:{async searchList(){let e=await ee({keywords:this.keyword},{limit:30});this.playList=e.data.result.songs}}};const ce=(0,O.Z)(oe,[["render",ae]]);var de=ce;function pe(e,t,n,i,a,s){return(0,w.wg)(),(0,w.iD)("div",null,(0,g.zw)(e.$route.name),1)}var me={name:"PlayerPage"};const he=(0,O.Z)(me,[["render",pe]]);var ye=he;const fe=[{path:"/",name:"Home",component:ie},{path:"/search",name:"Search",component:de},{path:"/player",name:"Player",component:ye}],we=(0,N.p7)({history:(0,N.r5)(),routes:fe});var ge=we;function ve(){return window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:"BackCompat"===document.compatMode?{w:document.body.clientWidth,h:document.body.clientHeight}:{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}(0,f.ri)(H).use(ge).use(i.Z).use(a.Z).use(s.Z).use(u.Z).use(l.Z).use(r.Z).use(o.Z).use(c.Z).use(d.Z).use(p.Z).use(m.Z).use(h.Z).use(y.Z).mount("#app"),document.getElementById("app").style.height=ve().h-100+"px"}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,s){if(!i){var u=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],s=e[c][2];for(var l=!0,r=0;r<i.length;r++)(!1&s||u>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(l=!1,s<u&&(u=s));if(l){e.splice(c--,1);var o=a();void 0!==o&&(t=o)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[i,a,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,u=i[0],l=i[1],r=i[2],o=0;if(u.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(r)var c=r(n)}for(t&&t(i);o<u.length;o++)s=u[o],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},i=self["webpackChunkvue_wfmusic"]=self["webpackChunkvue_wfmusic"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2096)}));i=n.O(i)})();
//# sourceMappingURL=app.45e97719.js.map